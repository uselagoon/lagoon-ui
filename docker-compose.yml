version: '3.2'

services:
  ui:
    build:
      context: .
      target: prod
      dockerfile: Dockerfile
    labels:
      lagoon.type: node
    command: yarn run start
    ports:
      - '3000:3000'
    networks:
      - default
    environment:
      LAGOON_ROUTE: http://lagoon-ui.docker.amazee.io
      LAGOON_UI_TOURS_ENABLED: false
      NODE_ENV: production
      GRAPHQL_API: "${GRAPHQL_API:-https://api.lagoon.amazeeio.cloud/graphql}"
      KEYCLOAK_API: "${KEYCLOAK_API:-https://keycloak.amazeeio.cloud/auth}"
